name: Deploy to Lambda

on: push

jobs:
  environment_setup:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3
      - name: setup python version
        uses: actions/setup-python@v3
        with:
          python-version: "3.10"

  deploy_shell_script:
    runs-on: ubuntu-latest
    needs: environment_setup
      - name: Run the bulid script
        run: sh bulid.sh
      
      - name: Moving the zip file to s3 location
        run: echo 'Moving the zip file to s3 location'

  deploy_to_lambda:
    runs-on: ubuntu-latest
    needs: environment_setup,deploy_shell_script
      - name: Moving the zip to lambda
        run: echo 'Moving the zip to lambda'